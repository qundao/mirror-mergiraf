[package]
name = "mergiraf"
version = "0.1.0"
edition = "2018"
license = "GPL-3.0-only"
repository = "https://codeberg.org/mergiraf/mergiraf"
keywords = ["git", "tree-sitter", "merge-driver"]
categories = ["development-tools"]
homepage = "https://mergiraf.org/"
documentation = "https://mergiraf.org/"

# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html

[build-dependencies]
cc="*"

[dependencies]
tree-sitter = "0.24"
tree-sitter-rust = "0.23"
tree-sitter-json = "0.23"
tree-sitter-yaml = { git = "https://github.com/wetneb/tree-sitter-yaml.git", rev = "7b5199133abceb03d6d1d8f1672f49b4f2a71442" }
tree-sitter-java = "0.23"
tree-sitter-html = "0.23"
tree-sitter-javascript = "0.23"
tree-sitter-cpp = "0.23"
tree-sitter-c-sharp = "0.23"
tree-sitter-xml = { git = "https://github.com/tree-sitter-grammars/tree-sitter-xml.git", rev = "cd1316e476ec40da6ce1fb5749c9d7e6b4f1090c" }
tree-sitter-go = { git = "https://github.com/tree-sitter/tree-sitter-go.git", rev = "ecc20866d1bd4d80f3aef06456ed3014d4d598e6" }
regex = "1.10.4"
graphviz-rust = { version = "0.9.0", optional = true }
itertools = "0.13.0"
typed-arena = "2"
tree-edit-distance = "0.4"
diffy = "0.4"
clap = { version = "4.5.7", features = ["derive"] }
stderrlog = "0.6"
log = "0.4"
rand = "0.8.5"
etcetera = "0.8.0"
zip = { version = "2.2.0", features = ["deflate"], default-features = false }

[dev-dependencies]
rstest = "0.21.0"
tempfile = "3"

[features]
default = ["dotty"]
dotty = ["dep:graphviz-rust"]

[profile.dev]
# to conform to Git's protocol for merge drivers, which requires
# a return code > 128 when an error occurs. This sets return code 134.
panic = "abort"
[profile.release]
panic = "abort"
strip = true
lto = true
debug = false
